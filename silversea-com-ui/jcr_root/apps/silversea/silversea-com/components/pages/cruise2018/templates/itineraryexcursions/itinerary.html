<template data-sly-template.default="${ @ cruise }">
    <div class="cruise-2018-itineraries-container">
        <div class="cruise-2018-itineraries-header">
            <div class="cruise-2018-itineraries-title">${'itinerary-and-excursions' @ i18n}</div>
            <div class="cruise-2018-itineraries-info">
            <span class="itineraries-info" data-sly-test="${cruise.cruiseModel.duration}">
                <i class="fa fa-clock-o fa-lg"></i> ${cruise.cruiseModel.duration} ${'days' @ i18n}
            </span>
                <span class="itineraries-info" data-sly-test="${cruise.numPorts}">
                <i class="fa fa-anchor fa-lg"></i> ${cruise.numPorts} ${'ports' @ i18n}
            </span>
                <span class="itineraries-info" data-sly-test="${cruise.numCountries}">
                <i class="fa fa-flag-o fa-lg"></i> ${cruise.numCountries} ${'countries' @ i18n}
            </span>
            </div>
            <div class="cruise-2018-itineraries-description">${'cruise-itinerary-description-v2' @ i18n}</div>
            <div class="cruise-2018-itineraries-voyage-code hidden-xs">${'voyage' @ i18n}: ${cruise.cruiseModel.cruiseCode}</div>
            <div class="cruise-2018-itineraries-map">
                <div class="ratio-big-itinerary"
                     data-sly-test.map="${cruise.cruiseModel.bigItineraryMap || cruise.cruiseModel.itinerary}">
                    <sly data-sly-use.imageTemplate="silversea/silversea-ssc/components/editorial/imageCoverSmall/imageCoverSmalltemplate.html"
                         data-sly-call="${imageTemplate.resp @ imagePath=map}"/>
                </div>
                <div class="ratio-small-itinerary"
                     data-sly-test.smallMap="${cruise.cruiseModel.smalItineraryMap || cruise.cruiseModel.itinerary}">
                    <sly data-sly-use.imageTemplate="silversea/silversea-ssc/components/editorial/imageCoverSmall/imageCoverSmalltemplate.html"
                         data-sly-call="${imageTemplate.resp @ imagePath=smallMap}"/>
                </div>
            </div>
        </div>
        <div class="cruise-2018-itineraries-pdf hidden-xs" data-sly-test="${cruise.cruiseModel.tourBook}">
            <a href="${cruise.cruiseModel.tourBook}" target="_blank"><span>${'view-all-excursions' @ i18n}</span>
                <i class="fa fa-angle-right fa-lg"></i>
            </a>
        </div>
        <div class="cruise-2018-itineraries-day-label hidden-xs">${ 'day' @ i18n }</div>
        <div data-sly-list.itinerary="${cruise.cruiseModel.itineraries}">
            <div class="cruise-2018-itineraries-itinerary" id="itinerary-${itinerary.itineraryId}">
                <div class="cruise-2018-itineraries-itinerary-row">
                    <a class="open-lightbox-port cruise-2018-link-open-modal" data-target=".lightbox"
                       href="${cruise.cruiseModel.page.path @ extension='html', selectors=['lightboxes.lg-port', itinerary.itineraryId]}"></a>
                    <div class="cruise-2018-itineraries-itinerary-row-day ${itineraryList.last ? 'cruise-2018-itineraries-itinerary-row-day-last' : ''}">
                        <div class="cruise-2018-itineraries-itinerary-row-day-wrapper">
                            <span class="cruise-2018-itineraries-itinerary-row-day-content"> ${itineraryList.count}</span>
                        </div>
                    </div>
                    <div class="cruise-2018-itineraries-itinerary-row-container ${itineraryList.last ?  'cruise-2018-itineraries-no-border' : ''} ${itinerary.port.excursions.size > 0 ? 'cruise-2018-itineraries-itinerary-row-container-with-excursion' : ''}">
                        <div class="cruise-2018-itineraries-itinerary-row-thumbnail">
                            <sly data-sly-use.imageTemplate="silversea/silversea-ssc/components/editorial/imageCoverSmall/imageCoverSmalltemplate.html"
                             data-sly-call="${imageTemplate.respLazy @ imagePath=itinerary.port.thumbnail}"/>
                        </div>
                        <div class="cruise-2018-itineraries-itinerary-row-text">
                            <div class="cruise-2018-itineraries-itinerary-row-text-name">
                                ${itinerary.port.title}
                            </div>
                            <div class="cruise-2018-itineraries-itinerary-row-text-country">
                                ${itinerary.port.countryIso3 @ i18n}
                            </div>
                            <div data-sly-test=${itinerary.port.excursions.size} class="cruise-2018-itineraries-itinerary-row-text-excursions">
                                ${itinerary.port.excursions.size} ${'excursions' @i18n}
                            </div>
                            <div class="cruise-2018-itineraries-itinerary-row-text-mobile-date">
                                <span data-sly-use.date="${'com.silversea.aem.helper.DateHelper' @ format='EEE dd MMM', date=itinerary.date}">
                                     ${date.value}
                                </span>
                            </div>
                        </div>
                        <div class="cruise-2018-itineraries-itinerary-row-date">
                            <div class="cruise-2018-itineraries-itinerary-row-date-day">
                                <span class="row-date-day-date"
                                      data-sly-use.date="${'com.silversea.aem.helper.DateHelper' @ format='EEEE dd MMM', date=itinerary.date}">
                                     ${date.value}
                                </span>
                            </div>
                            <div class="cruise-2018-itineraries-itinerary-row-date-time">
                                ${itinerary.arriveTime}
                                <sly data-sly-test="${itinerary.arriveTime && itinerary.departTime}"> -</sly>
                                ${itinerary.departTime}
                                <span data-sly-test="${itinerary.overnight}">moon</span>
                            </div>
                        </div>
                        <div class="cruise-2018-itineraries-itinerary-row-date-lightbox">
                            <i class="btn-more fa fa-angle-down"></i>
                        </div>
                        <div
                                class="cruise-2018-itineraries-itinerary-row-date-arrow" data-ssc-accordion="show">
                            <i data-sly-test="${itinerary.port.excursions.size}"
                               class="btn-more fa fa-angle-down"></i>
                            <i data-sly-test="${itinerary.port.excursions.size}" style="display:none;"
                               class="btn-more fa fa-angle-up"></i>
                        </div>
                    </div>
                    <div class="cruise-2018-itineraries-excursions-accordion cruise-2018-itineraries-show-more-wrapper"
                         style="display:none;"
                         data-sly-test="${itinerary.port.excursions.size}">
                        <div class="cruise-2018-itineraries-excursions-accordion cruise-2018-itineraries-show-more cruise-2018-itineraries-port-excursions-description">${itinerary.port.description} </div>
                        <div class="cruise-2018-itineraries-excursions-accordion cruise-2018-itineraries-show-more cruise-2018-itineraries-port-excursions-number">${itinerary.port.excursions.size} ${'excursions' @ i18n}</div>
                    </div>
                    <sly data-sly-test="${itinerary.port.excursions.size}"
                         data-sly-use.excursion="/apps/silversea/silversea-com/components/pages/cruise2018/templates/itineraryexcursions/excursion.html"
                         data-sly-call="${excursion.default @ port=itinerary.port, cruise=cruise}"/>
                </div>

            </div>
        </div>
        <div class="cruise-2018-itineraries-call visible-xs">
            <div class="cruise-2018-itineraries-call-section">
                <p class="cruise-2018-itineraries-call-section-text-1">${'call-reservations-team-learn-excursion' @ i18n}</p>
                <span class="cruise-2018-itineraries-call-section-number">
                    <i class="fa fa-phone fa-stack-1x"></i>
                    <sly data-sly-use.googleForwardingNumberTemplate="/apps/silversea/silversea-ssc/components/included/googleforwardingnumber/googleforwardingnumber.html"/>
	            	<sly data-sly-call="${googleForwardingNumberTemplate.footer}"/>
                 </span>
            </div>
        </div>
    </div>
</template>
