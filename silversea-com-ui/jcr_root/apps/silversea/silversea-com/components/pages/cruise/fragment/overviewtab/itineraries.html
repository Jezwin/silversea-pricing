<template data-sly-template.default="${ @ cruise }">
    <div class="c-cruise__itineraries">
        <span class="c-cruise__subtitle alternative-h">${'cruise-itinerary' @ i18n}</span>
        <sly data-sly-test="${cruise.cruiseModel.cruiseType != 'silversea-expedition'}">
	        <p class="c-cruise__descr">
	            <span class="c-cruise__descr-text">${'cruise-itinerary-description-v2' @ i18n}</span>
	            <br class="c-cruise__descr-br"/>
	            <a href="" class="cruise-itinerary-link"><strong>${'cruise-itinerary-link' @ i18n}</strong></a>
	        </p>
        </sly>
        <sly data-sly-test="${cruise.cruiseModel.cruiseType == 'silversea-expedition'}">
	        <p class="c-cruise__descr">
	            <span class="c-cruise__descr-text">${'cruise-itinerary-description-v2-expedition' @ i18n}</span>
	            <br class="c-cruise__descr-br"/>
	            <a href="" class="cruise-itinerary-link"><strong>${'cruise-itinerary-link' @ i18n}</strong></a>
	        </p>
        </sly>
        

        <div class="c-cruise-itinerary-list" id="c-cruise-itinerary-list"
             data-sly-test="${cruise.cruiseModel.compactedItineraries}"
             data-sly-list.itinerary="${cruise.cruiseModel.compactedItineraries}">
            <sly data-sly-test.excursions="${itinerary.hasDedicatedShorex ? itinerary.compactedExcursions : itinerary.port.excursions }" />
            <sly data-sly-test.landPrograms="${cruise.itinerariesHasLandPrograms ? itinerary.landPrograms : itinerary.landPrograms  }" />

            <div class="c-cruise-itinerary-list__item panel">
                <div class="c-cruise-itinerary-list__headline collapsed clearfix" data-toggle="collapse" data-target="#collapse-${itineraryList.count}" data-parent="#c-cruise-itinerary-list" role="button"
                    data-sly-use.assetHelper="${'com.silversea.aem.helper.AssetHelper' @ assetPath = itinerary.port.thumbnail}">
                    <div class="c-cruise-itinerary-list__headline__image lazy" data-sly-test="${itinerary.port.thumbnail}"
                        data-src="${assetHelper.imageUrl @ context='uri'}?hei=430&wid=430&fit=constrain"></div>
                    <ul class="c-cruise-itinerary-list__headline__title">
                        <li class="c-cruise-itinerary-list__headline__title__city">${itinerary.port.apiTitle}</li>
                        <li class="c-cruise-itinerary-list__headline__title__country">${itinerary.port.country}</li>
                    </ul>
                    <ul class="c-cruise-itinerary-list__headline__date">
                        <li class="c-cruise-itinerary-list__headline__date__duration">
                            <sly data-sly-test="${itinerary.departDate}">${'from' @ i18n} </sly>
                            <span data-sly-use.date="${'com.silversea.aem.helper.DateHelper' @ format='EEEE dd MMM', date=itinerary.date}">${date.value}</span>
                            <sly data-sly-test="${itinerary.departDate}"> ${'to' @ i18n} </sly>
                            <span data-sly-use.departDate="${'com.silversea.aem.helper.DateHelper' @ format='EEEE dd MMM', date=itinerary.departDate}">${departDate.value}</span>
                        </li>
                        <li class="c-cruise-itinerary-list__headline__date__time hidden-xs">
                            <span data-sly-use.arriveTimeFormat="${'com.silversea.aem.helper.DateHelper' @ time=itinerary.arriveTime}" data-sly-test.arriveTime="${itinerary.arriveTime}">${'arrive' @ i18n}: ${arriveTimeFormat.value}</span><sly data-sly-test="${itinerary.arriveTime && itinerary.departTime}">,</sly>
                            <span data-sly-use.departTimeFormat="${'com.silversea.aem.helper.DateHelper' @ time=itinerary.departTime}" data-sly-test.departTime="${itinerary.departTime}">${'depart' @ i18n} ${departTimeFormat.value}</span>
                        </li> 
                         <li class="c-cruise-itinerary-list__headline_overnight hidden-xs" data-sly-test="${itinerary.numberDays > 0}">
                         	<sly data-sly-use.loopOvernight="${'com.silversea.aem.helper.ListHelper' @ sizeLoop=itinerary.numberDays}" data-sly-repeat="${loopOvernight.objectListLoop}">
                         		<span><i class="fa fa-moon-o"></i></span>
                         	</sly>
                            <span>${'overnight-in-port' @ i18n }</span>
                        </li>                        	
                        
                    </ul>
                    <div class="c-cruise-itinerary-list__headline__expand">
                        <span class="btn-more"><span>${'more' @ i18n}</span> <i class="fa fa-angle-down"></i></span>
                        <span class="btn-less"><span>${'close' @ i18n}</span> <i class="fa fa-angle-up"></i></span>
                    </div>
                </div>
                <div class="c-cruise-itinerary-list__description collapse clearfix" id="collapse-${itineraryList.count}" role="tabpanel">
                    <div class="c-cruise-itinerary-list__description__text">
                        <sly data-sly-use.description="${'com.silversea.aem.helper.StringHelper' @ text=itinerary.port.description, limit=600}" />
                        ${description.textTruncate @ context='html'}
                    </div>
                    <p class="c-cruise-itinerary-list__description__button" data-sly-test="${(excursions && excursions.size > 0) || (landPrograms && landPrograms.size > 0)}">
                        <a data-sly-test="${excursions && excursions.size > 0 && cruise.cruiseModel.cruiseType == 'silversea-cruise'}"
                           href="#"
                           data-tab-target="#excursion"
                           data-collpase-id="ex-${itinerary.itineraryId}"
                           class="c-btn c-btn--white"
                           title="${'view' @ i18n} X ${'excursion-s' @ i18n}">
                            ${'view' @ i18n} ${excursions.size} ${'excursion-s' @ i18n} ${'in' @ i18n} ${itinerary.port.apiTitle} <i class="fa fa-lg fa-angle-right"></i>
                        </a>
                        <a data-sly-test="${landPrograms && landPrograms.size > 0}"
                           href="#"
                           data-tab-target="#landnhotel"
                           data-collpase-id="lp-${itinerary.itineraryId}"
                           class="c-btn c-btn--white"
                           title="${'view' @ i18n} X ${'land-programme-s' @ i18n}">
                            ${'view' @ i18n} ${landPrograms.size} ${'land-programme-s' @ i18n} ${'in' @ i18n} ${itinerary.port.apiTitle} <i class="fa fa-lg fa-angle-right"></i>
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>
       	<!--/* Suite and fares tab */-->
   	<div id="suitenfare-b-version">
	 	<sly data-sly-use.suitelist="silversea/silversea-com/components/pages/cruise/fragment/suitetab/suitelist.html"
	       		data-sly-call="${suitelist.default @ cruise=cruise}" />
   	</div>
  	
</template>