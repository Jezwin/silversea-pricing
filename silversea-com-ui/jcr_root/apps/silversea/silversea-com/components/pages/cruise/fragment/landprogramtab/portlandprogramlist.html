<div data-sly-use.cruise="com.silversea.aem.components.page.CruiseUse"
    data-sly-use.imageTemplate="silversea/silversea-com/components/editorial/image/imagetemplate.html">
    <!--/* TODO replace with getter */-->
    <h3 class="c-cruise__subtitle">
         <span data-sly-test="${cruise.landProgramsNumber}">
            ${cruise.landProgramsNumber} ${cruise.landProgramsNumber == 1 ? 'land-programme' : 'land-programmes' @ i18n}
        </span>
         <span data-sly-test="${cruise.landProgramsNumber && cruise.hotelsNumber}"> ${'and' @ i18n}</span>
         <span data-sly-test="${cruise.hotelsNumber}">
            ${cruise.hotelsNumber} ${cruise.hotelsNumber == 1 ? 'hotel' : 'hotels' @ i18n}
        </span>
    </h3>
    <p class="c-cruise__descr">
        ${'land-programmes-description' @ i18n}
    </p>

    <div class="c-accordion c-cruise-landnprograms__list"
         data-multiview="false"
         data-more="<i class='fa fa-angle-down'></i>"
         data-close="<i class='fa fa-angle-up'></i>"
         data-sly-list.itinerary="${cruise.cruiseModel.itineraries}">
        <div class="c-accordion__elem c-cruise-landnprograms__list__item" data-sly-test="${itinerary.hotels.size > 0 || itinerary.landPrograms.size > 0}">
            <div class="c-accordion__header c-accordion__header--parent">
                <div class="c-accordion__title c-accordion__title--thumbnail">
                    <sly data-sly-call="${imageTemplate.default @ imagePath=itinerary.port.thumbnail}" />
                </div>
                <div class="c-accordion__title w-title valigntop">
                    <p class="c-accordion__subtitle veryimportant">${itinerary.port.apiTitle}</p>
                    <p>${itinerary.port.country}</p>
                    <p class="visible-xs" data-sly-use.date="${'com.silversea.aem.helper.DateHelper' @ format='EEEE dd MMM', date=itinerary.date}">
                        ${date.value}
                    </p>
                </div>
                <div class="c-accordion__title w-content valigntop hidden-xs">
                    <p>${date.value}</p>
                </div>
                <div class="c-accordion__title w-content valigntop hidden-xs">
                    <u>
                        <sly data-sly-test="${itinerary.landPrograms.size > 0}">${itinerary.landPrograms.size} ${itinerary.landPrograms.size == 1 ? 'land-programme' : 'land-programmes' @ i18n} </sly>
                        <sly data-sly-test="${itinerary.landPrograms.size > 0 && itinerary.hotels.size > 0}">${'and' @ i18n} </sly>
                        <sly data-sly-test="${itinerary.hotels.size > 0}">${itinerary.hotels.size} ${itinerary.hotels.size == 1 ? 'hotel' : 'hotels' @ i18n}</sly>
                    </u>
                </div>
                <div class="c-accordion__action small">
                    <i class='fa fa-angle-down'></i>
                </div>
            </div>
            <div class="c-accordion__body c-accordion__body--full" data-sly-use.accordionTemplate="accordion-body.html">
                <sly data-sly-test.landPrograms="${cruise.itinerariesHasElements ? itinerary.landPrograms : itinerary.port.landPrograms }" />
                <sly data-sly-test.hotels="${cruise.itinerariesHasElements ? itinerary.hotels : itinerary.port.hotels }" />
                <sly data-sly-test.landProgramsId="${'{0}{1}' @ format=['landPrograms', itineraryList.count]}" />
                <sly data-sly-test.hotelsId="${'{0}{1}' @ format=['hotels', itineraryList.count]}" />
                <sly data-sly-call="${accordionTemplate.default @ list=landPrograms, loop = landProgramsId}" />
                <sly data-sly-call="${accordionTemplate.default @ list=hotels, loop = hotelsId}" />
            </div>
        </div>
    </div>

    <p class="visible-xs text-center">
        <a class="btn btn-thin btn-red effect" href="${cruise.requestQuotePagePath @ extension='html', suffix=pageProperties.cruiseCode}" data-sscclicktype="clic-RAQ"><span>${'request-quote' @ i18n}</span><i class="fa fa-angle-right"></i></a>
    </p>
</div>