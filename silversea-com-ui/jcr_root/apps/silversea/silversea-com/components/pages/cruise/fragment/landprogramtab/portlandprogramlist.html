<div data-sly-use.cruise="com.silversea.aem.components.page.CruiseUse">
    <!--/* TODO replace with getter */-->
    <h3 class="c-cruise__subtitle">
         <span data-sly-test="${cruise.landProgramsNumber}">
            ${cruise.landProgramsNumber} ${cruise.landProgramsNumber == 1 ? 'land-programme' : 'land-programmes' @ i18n}
        </span>
         <span data-sly-test="${cruise.landProgramsNumber && cruise.hotelsNumber}"> ${'and' @ i18n}</span>
         <span data-sly-test="${cruise.hotelsNumber}">
            ${cruise.hotelsNumber} ${cruise.hotelsNumber == 1 ? 'hotel' : 'hotels' @ i18n}
        </span>
    </h3>
    <p class="c-cruise__descr">
        ${'land-programmes-description' @ i18n}
    </p>

    <div id="land-programs-collapse" class="c-cruise-landnprograms__list"
        data-sly-list.itinerary="${cruise.cruiseModel.itineraries}"
        data-sly-use.imageTemplate="silversea/silversea-com/components/editorial/image/imagetemplate.html">
        <div class="panel c-cruise-landnprograms__list__item" data-sly-test="${itinerary.hotels.size > 0 || itinerary.landPrograms.size > 0}">
            <div class="collapsed panel__heading" data-toggle="collapse" data-parent="#land-programs-collapse" data-target="#itinerary-${itineraryList.count}" aria-expanded="false">
                <div class="panel__heading__image">
                    <sly data-sly-call="${imageTemplate.default @ imagePath=itinerary.port.thumbnail}" />
                </div>
                <div class="panel__heading__description">
                    <h3><strong>${itinerary.port.apiTitle}</strong></h3>
                    <p data-sly-use.date="${'com.silversea.aem.helper.DateHelper' @ format='EEEE dd MMM', date=itinerary.date}">
                        <span>${itinerary.port.country}</span>
                        <span class="visible-xs-inline"><br />${date.value}</span>
                    </p>
                </div>
                <div class="panel__heading__date hidden-xs">
                    <span>${date.value}</span>
                </div>
                <div class="panel__heading__info hidden-xs">
                    <span>
                        <sly data-sly-test="${itinerary.landPrograms.size > 0}">${itinerary.landPrograms.size} ${itinerary.landPrograms.size == 1 ? 'land-programme' : 'land-programmes' @ i18n} </sly>
                        <sly data-sly-test="${itinerary.landPrograms.size > 0 && itinerary.hotels.size > 0}">${'and' @ i18n} </sly>
                        <sly data-sly-test="${itinerary.hotels.size > 0}">${itinerary.hotels.size} ${itinerary.hotels.size == 1 ? 'hotel' : 'hotels' @ i18n}</sly>
                    </span>
                </div>
                <i class="btn-more fa fa-angle-down"></i>
                <i class="btn-less fa fa-angle-up"></i>
            </div>
            <div id="itinerary-${itineraryList.count}" class="collapse panel__body" aria-expanded="false" data-sly-use.accordionTemplate="accordion-body.html">
                <sly data-sly-test.landProgramsId="${'{0}{1}' @ format=['land-programs-collapse-nested-', itineraryList.count]}" />
                <sly data-sly-call="${accordionTemplate.default @ list = cruise.itinerariesHasElements ? itinerary.landPrograms : itinerary.port.landPrograms, loop = landProgramsId}" />
                <sly data-sly-test.hotelsId="${'{0}{1}' @ format=['hotels-collapse-nested-', itineraryList.count]}" />
                <sly data-sly-call="${accordionTemplate.default @ list = cruise.itinerariesHasElements ? itinerary.hotels : itinerary.port.hotels, loop = hotelsId}" />
            </div>
        </div>
    </div>

    <p class="visible-xs text-center">
        <a class="btn btn-thin btn-red effect" href="${cruise.requestQuotePagePath @ extension='html', suffix=pageProperties.cruiseCode}" data-sscclicktype="clic-RAQ"><span>${'request-quote' @ i18n}</span><i class="fa fa-angle-right"></i></a>
    </p>
</div>