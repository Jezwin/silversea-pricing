<sly data-sly-use.cruise="com.silversea.aem.components.page.CruiseUse" />
<div class="row">
    <div class="col-xs-12">
        <h3 class="c-cruise__subtitle hidden-xs">${'excursions' @ i18n}</h3>
        <p class="c-cruise__descr">
            ${'cruise-excursion-description' @ i18n}
        </p>
        <div id="excursion-collapse" class="c-cruise-itinerary-2__list" role="tablist"
            data-sly-list.itinerary="${cruise.cruiseModel.compactedItineraries}"
            data-sly-use.imageTemplate="silversea/silversea-com/components/editorial/image/imagetemplate.html">
            <sly data-sly-test.excursions="${cruise.itinerariesHasElements ? itinerary.compactedExcursions : itinerary.port.excursions }" />

            <div class="panel c-cruise-itinerary-2__list__item" data-sly-test="${excursions && excursions.size > 0}">
                <div class="collapsed panel__heading" role="button" data-toggle="collapse" data-parent="#excursion-collapse" data-target="#ex-${itinerary.port.cityId}" aria-expanded="false">
                    <div class="panel__heading__image">
                        <sly data-sly-call="${imageTemplate.default @ imagePath=itinerary.port.thumbnail}" />
                    </div>
                    <div class="panel__heading__description">
                        <h3><strong>${itinerary.port.apiTitle}</strong></h3>
                        <p data-sly-use.date="${'com.silversea.aem.helper.DateHelper' @ format='EEEE dd MMM', date=itinerary.date}">
                            <span>${itinerary.port.country}</span>
                            <span class="visible-xs-inline"><br />${date.value}</span>
                        </p>
                    </div>
                    <div class="panel__heading__date hidden-xs">
                        <p>
                            <span>${date.value}<br /></span>
                            <small data-sly-test="${itinerary.arriveTime}">${'arrive' @ i18n}: ${itinerary.arriveTime},</small>
                            <small data-sly-test="${itinerary.departTime}">${'depart' @ i18n} ${itinerary.departTime}</small>
                        </p>
                    </div>
                    <div class="panel__heading__info hidden-xs">
                        <span>${excursions.size} ${'excursions' @ i18n} ${'in' @ i18n} ${itinerary.port.country}</span>
                    </div>
                    <i class="btn-more fa fa-angle-down"></i>
                    <i class="btn-less fa fa-angle-up"></i>
                </div>
                <div id="ex-${itinerary.port.cityId}" class="collapse panel__body c-cruise-itinerary-2__list--nested" role="tabpanel" aria-expanded="false" data-sly-use.collapseNestedTemplate="collapse-nested.html">
                    <sly data-sly-test.parentId="${'{0}{1}' @ format=['itinerary-ex-', itineraryList.count]}" />
                    <sly data-sly-call="${collapseNestedTemplate.default @ list = excursions, parent = parentId}" />
                </div>
            </div>
        </div>
    </div>
</div>