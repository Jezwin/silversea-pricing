stages:
    - dev-build
    - rc-build
    - release-build

### DEV Build
mvn_build_dev_author:
    stage: dev-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.url=http://172.31.6.213:4502
    only:
        - develop

mvn_build_dev_publish1:
    stage: dev-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.url=http://172.31.13.214:4503
    only:
        - develop

mvn_build_dev_publish2:
    stage: dev-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.url=http://172.31.21.95:4503
    only:
        - develop

### RC Build
mvn_build_rc_author:
    stage: rc-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.url=http://172.31.2.240:4502
    only:
        - /^release-.*$/

mvn_build_rc_publish1:
    stage: rc-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.url=http://172.31.0.114:4503
    only:
        - /^release-.*$/

mvn_build_rc_publish2:
    stage: rc-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.url=http://172.31.22.151:4503
    only:
        - /^release-.*$/

### Release Build
mvn_build_release_author:
    stage: release-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.password=$AUTHOR_STAGE_PASSWORD -Dcq.user=ci-user  -Dcq.url=http://34.194.113.231:4502
    only:
        - /^[0-9]\.[0-9]\.[0-9]$/

mvn_build_release_publish1:
    stage: release-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.password=$AUTHOR_STAGE_PASSWORD -Dcq.user=ci-user -Dcq.url=http://34.196.202.218:4503
    only:
        - /^[0-9]\.[0-9]\.[0-9]$/

mvn_build_release_publish2:
    stage: release-build
    tags:
        - maven
    script:
        - mvn clean install -Pauto-install-package -Dcq.password=$AUTHOR_STAGE_PASSWORD -Dcq.user=ci-user -Dcq.url=http://34.192.200.203:4503
    only:
        - /^[0-9]\.[0-9]\.[0-9]$/